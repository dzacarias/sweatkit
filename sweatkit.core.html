<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>sweatkit.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">sweatkit 0.1.3-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sweatkit</span></div></div></li><li class="depth-2 branch current"><a href="sweatkit.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>formats</span></div></div></li><li class="depth-3"><a href="sweatkit.formats.tcx.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcx</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sweatkit.core.html#var-acc-metric.3F"><div class="inner"><span>acc-metric?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-activity"><div class="inner"><span>activity</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-activity.3F"><div class="inner"><span>activity?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-altitude"><div class="inner"><span>altitude</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-cadence"><div class="inner"><span>cadence</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-calories"><div class="inner"><span>calories</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-db"><div class="inner"><span>db</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-db.3F"><div class="inner"><span>db?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-distance"><div class="inner"><span>distance</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-hr"><div class="inner"><span>hr</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-IInterval"><div class="inner"><span>IInterval</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-dtstart"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dtstart</span></div></a></li><li class="depth-2"><a href="sweatkit.core.html#var-duration"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duration</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-IMeasured"><div class="inner"><span>IMeasured</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-interval"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interval</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-metrics"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metrics</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-mreduce"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mreduce</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-track"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>track</span></div></a></li><li class="depth-2"><a href="sweatkit.core.html#var-tracked.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracked?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-IPointValue"><div class="inner"><span>IPointValue</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-inst"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>inst</span></div></a></li><li class="depth-2 branch"><a href="sweatkit.core.html#var-metric"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metric</span></div></a></li><li class="depth-2"><a href="sweatkit.core.html#var-value"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>value</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-ISports"><div class="inner"><span>ISports</span></div></a></li><li class="depth-2"><a href="sweatkit.core.html#var-sports"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sports</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-measured.3F"><div class="inner"><span>measured?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-measurement"><div class="inner"><span>measurement</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-measurement.3F"><div class="inner"><span>measurement?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-metric-types"><div class="inner"><span>metric-types</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-pace"><div class="inner"><span>pace</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-point-val.3F"><div class="inner"><span>point-val?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-position"><div class="inner"><span>position</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-power"><div class="inner"><span>power</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-segment"><div class="inner"><span>segment</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-segment.3F"><div class="inner"><span>segment?</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-speed"><div class="inner"><span>speed</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-splits"><div class="inner"><span>splits</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-sport-types"><div class="inner"><span>sport-types</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-steps"><div class="inner"><span>steps</span></div></a></li><li class="depth-1"><a href="sweatkit.core.html#var-trigger-types"><div class="inner"><span>trigger-types</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">sweatkit.core</h2><div class="doc"><pre class="plaintext">Provides the basic abstractions and fns to polymorphically work with sports
activity data: i.e. extracting the usual fitness metrics (like Speed, HR,
Altitude, Distance) out of collections of activities, individual activities
or small time segments within them.</pre></div><div class="public anchor" id="var-acc-metric.3F"><h3>acc-metric?</h3><div class="usage"><code>(acc-metric? m)</code></div><div class="doc"><pre class="plaintext">Returns true for metrics whose point value is an accumulator 
instead of a single reading (e.g. :distance and :calories vs :speed)</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L458">view source</a></div></div><div class="public anchor" id="var-activity"><h3>activity</h3><div class="usage"><code>(activity a)</code></div><div class="doc"><pre class="plaintext">Takes a map, as validated by the activity? fn and yields a mostly identical
new one, but where each element in :segments is made an IMeasured (as per
the segment fn)

If the input is already an IMeasured, it will be returned as-is.
If the input is not a valid activity map, the function returns nil</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L654">view source</a></div></div><div class="public anchor" id="var-activity.3F"><h3>activity?</h3><div class="usage"><code>(activity? a)</code></div><div class="doc"><pre class="plaintext">Takes a map and validates if it has the proper structure in order for it
to be considered an activity, like so:
     :activities =&gt; Collection of maps like this:
         :dtstart =&gt; DateTime - starting instant
         :annotations =&gt; Map - Relevant annotations
         :segments =&gt; Collection of maps, as per the segment? fn</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L644">view source</a></div></div><div class="public anchor" id="var-altitude"><h3>altitude</h3><div class="usage"><code>(altitude md)</code><code>(altitude md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Altitude track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or one of these keywords for
standard behavior: :avg, :max, :min</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L526">view source</a></div></div><div class="public anchor" id="var-cadence"><h3>cadence</h3><div class="usage"><code>(cadence md)</code><code>(cadence md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Cadence track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or one of these keywords for
standard behavior: :avg, :max, :min</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L550">view source</a></div></div><div class="public anchor" id="var-calories"><h3>calories</h3><div class="usage"><code>(calories md)</code><code>(calories md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Calories track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or the :total keyword to get the
accumulated value</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L518">view source</a></div></div><div class="public anchor" id="var-db"><h3>db</h3><div class="usage"><code>(db in)</code></div><div class="doc"><pre class="plaintext">Takes a data structure as checked by db? and yields a mostly identical
new one, but where each element in the :activities vector is made to be
an IMeasured. Since IMeasured colls are also IMeasured themselves, you
also get that behavior</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L676">view source</a></div></div><div class="public anchor" id="var-db.3F"><h3>db?</h3><div class="usage"><code>(db? in)</code></div><div class="doc"><pre class="plaintext">Takes a data structure and checks if it conforms to sweatkit&apos;s db format:
A map with these keys and values:
 :activities =&gt; Collection of maps, as per the activity? fn</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L668">view source</a></div></div><div class="public anchor" id="var-distance"><h3>distance</h3><div class="usage"><code>(distance md)</code><code>(distance md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Distance track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or the :total keyword to get the
accumulated value.
N.B: As of now, this metric will not use the geo track to calculate distance.
     Only tracks that provide this metric directly are considered (this might
     change in the future)</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L566">view source</a></div></div><div class="public anchor" id="var-hr"><h3>hr</h3><div class="usage"><code>(hr md)</code><code>(hr md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Heart Rate track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or one of these keywords for
standard behavior: :avg, :max, :min</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L534">view source</a></div></div><div class="public anchor" id="var-IInterval"><h3>IInterval</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">A time interval has an initial instant and a duration
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-dtstart"><h3>dtstart</h3><div class="usage"><code>(dtstart this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-duration"><h3>duration</h3><div class="usage"><code>(duration this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L21">view source</a></div></div><div class="public anchor" id="var-IMeasured"><h3>IMeasured</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">A set of sports metrics taken over a time interval. Depending on the source
device, metrics may be tracked over time or just stored as global values;
this abstraction lets you access the whole track and/or the reduced value</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-interval"><h3>interval</h3><div class="usage"><code>(interval this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-metrics"><h3>metrics</h3><div class="usage"><code>(metrics this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-mreduce"><h3>mreduce</h3><div class="usage"><code>(mreduce this metric rfn)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-track"><h3>track</h3><div class="usage"><code>(track this metric)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-tracked.3F"><h3>tracked?</h3><div class="usage"><code>(tracked? this metric)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L26">view source</a></div></div><div class="public anchor" id="var-IPointValue"><h3>IPointValue</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">A point value for some metric
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-inst"><h3>inst</h3><div class="usage"><code>(inst this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-metric"><h3>metric</h3><div class="usage"><code>(metric this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-value"><h3>value</h3><div class="usage"><code>(value this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L36">view source</a></div></div><div class="public anchor" id="var-ISports"><h3>ISports</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Something with a sequence of Sports
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-sports"><h3>sports</h3><div class="usage"><code>(sports this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L17">view source</a></div></div><div class="public anchor" id="var-measured.3F"><h3>measured?</h3><div class="usage"><code>(measured? x)</code></div><div class="doc"><pre class="plaintext">Tests if x implements the IMeasured interface
</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L446">view source</a></div></div><div class="public anchor" id="var-measurement"><h3>measurement</h3><div class="usage"><code>(measurement m)</code></div><div class="doc"><pre class="plaintext">Takes a map, as validated by the measurement-point? fn and yields
a new one, implementing the IPointValue protocol. If there is more than
one metric entry, one will be chose as random, for this measurement

If the input is already a point-val, it will be returned as-is.
If the input is not a valid measurement map, the function returns nil</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L594">view source</a></div></div><div class="public anchor" id="var-measurement.3F"><h3>measurement?</h3><div class="usage"><code>(measurement? m)</code></div><div class="doc"><pre class="plaintext">Takes a map and validates if it has the necessary keys and vals
to be considered a measurement point, like so:
  :instant =&gt; Reading instant (DateTime)
  :&lt;metric&gt; (key corresponding to the metric-type) =&gt; &lt;value&gt;

  The metric value may be a number or a map with :lan and :lng keys,
  each with numeric values</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L583">view source</a></div></div><div class="public anchor" id="var-metric-types"><h3>metric-types</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The set of supported metric types
</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L432">view source</a></div></div><div class="public anchor" id="var-pace"><h3>pace</h3><div class="usage"><code>(pace md)</code><code>(pace md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Pace track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or one of these keywords for
standard behavior: :avg, :max, :min.

If the measured obj doesn&apos;t have this metric itself, this fn tries to get
it via the :speed metric, in case it exists.</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L496">view source</a></div></div><div class="public anchor" id="var-point-val.3F"><h3>point-val?</h3><div class="usage"><code>(point-val? x)</code></div><div class="doc"><pre class="plaintext">Tests if x implements the IPointValue interface
</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L453">view source</a></div></div><div class="public anchor" id="var-position"><h3>position</h3><div class="usage"><code>(position md)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and yields the whole Position track, if it exists
</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L577">view source</a></div></div><div class="public anchor" id="var-power"><h3>power</h3><div class="usage"><code>(power md)</code><code>(power md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Power track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or one of these keywords for
standard behavior: :avg, :max, :min</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L542">view source</a></div></div><div class="public anchor" id="var-segment"><h3>segment</h3><div class="usage"><code>(segment s)</code></div><div class="doc"><pre class="plaintext">Takes a map, as validated by the segment? fn  and yields a mostly identical
new one, implementing the IMeasured interface

If the input is already an IMeasured, it will be returned as-is.
If the input is not a valid segment map, the function returns nil</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L626">view source</a></div></div><div class="public anchor" id="var-segment.3F"><h3>segment?</h3><div class="usage"><code>(segment? s)</code></div><div class="doc"><pre class="plaintext">Takes a map and validates if it has the proper structure in order
for it to be considered a segment, like so:
  :dtstart =&gt; Starting instant (DateTime)
  :duration =&gt; Number of seconds (Double)
  :active =&gt; Was this an active period? (Boolean)
  :trigger =&gt; What caused this segment? (An element from trigger-types)
  :annotations =&gt; Map with relevant annotations
  :metrics =&gt; Map with keys corresponding to metric-types,
                    each of its values a map like this:
     :avg =&gt; Average value for this metric
     :max =&gt; Max value for this metric
     :min =&gt; Min value for this metric
     :total =&gt; Total value for this metric
     :track =&gt; Seq of individual readings, as per the measurement? fn</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L609">view source</a></div></div><div class="public anchor" id="var-speed"><h3>speed</h3><div class="usage"><code>(speed md)</code><code>(speed md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Speed track, otherwise it returns a single value.
rfn can be any fn reducing point-vals or one of these keywords for
standard behavior: :avg, :max, :min</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L488">view source</a></div></div><div class="public anchor" id="var-splits"><h3>splits</h3><div class="usage"><code>(splits md m v)</code></div><div class="doc"><pre class="plaintext">Takes a measured object, an accumulator metric and a split value and
returns a seq of IMeasured objects, representing the split intervals.
Each interval will have a start/end point corresponding to the accumulator
metric/value steps, and instants calculated by interpolation from 
the surrounding points.
All other metrics are also split between these instants and are included
in the IMeasured object, if they have metric tracks. If they only have
reduced values (such as max or avg), they are ignored.

If the given metric is not an accumulator, or there&apos;s no track for it,
this fn will return nil.</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L464">view source</a></div></div><div class="public anchor" id="var-sport-types"><h3>sport-types</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The set of supported sport types
</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L442">view source</a></div></div><div class="public anchor" id="var-steps"><h3>steps</h3><div class="usage"><code>(steps md)</code><code>(steps md rfn)</code></div><div class="doc"><pre class="plaintext">Takes a measured object and an optional reducing fn. When the fn is not
given, yields the whole Steps track, otherwise, it returns a single value.
rfn can be any fn reducing point-vals or the :total keyword to get the
accumulated value</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L558">view source</a></div></div><div class="public anchor" id="var-trigger-types"><h3>trigger-types</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The set of supported segment triggers (what causes an activity segment
to be created)</pre></div><div class="src-link"><a href="https://github.com/dzacarias/sweatkit/blob/master/src/cljx/sweatkit/core.cljx#L437">view source</a></div></div></div></body></html>